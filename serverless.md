## サーバレス業務システム開発

### 案件概要

社会保険系法人様の業務システムの大幅刷新案件(運用プラットフォームの AWS 移行、サービスのサーバレス化、運用自動化)

### 担当

テストチームに早期から参画し、案件序盤ではテスト自動化や CI/CD 手法の考案と検証を担当しました。

案件中盤からは、上記の考案に基づいたサンプルプロジェクトやテスト実施ガイドの作成や、上記以外にテストチームの作業で必要な AWS リソースの検討や、それらの利用フローや使用方法をドキュメント化する作業を担当していました。

テストフェーズ開始後は、 Selenium(Python) テストコードの作成とレビュー、テスト実施を担当しました。

### CI

PM の方や開発チームの方と検討したところ、CI 内容として「Python コードの単体テスト」「Selenium の結合(E2E)テスト」を盛り込むことになりました。テストチームとして要求するカバレッジ率やログ内容を検討した後、その指標が出力される設定ファイルや期待するテストコードのサンプルなどを含んだサンプルプロジェクトの作成や、テストコード関連のトラブルシューティングを担当しました。単体テスト(Unittest)、結合テスト(Selenium)ともに Python で作成しましたが、案件参画時点ではあまり習熟していなかったこともあり、サンプル作成やトラブルシューティングは大変でしたが、短期間で多くの Python 関連の知識を得ることができましたし、作成したサンプルやガイドを開発チームやテストチームで役立てていただけて達成感を感じました。

### テストチームにおける、AWS リソース利用の窓口・ドキュメント作成

テストチームとして最終的には 10 名以上のメンバーが集まりましたが、AWS について少しでも知見のあるメンバーは自分 1 人という状況だったので、テストに必要な AWS リソースの利用について他社の方と検討したり、それらの使い方やデータ投入方法（例えば、 Cognito の ユーザーやプロパティの追加方法だったり、AWS CLI をインストールして開発用ロールを使うための設定だったり）を調査してテストチームメンバー向けに説明したり、ドキュメント化して回ったので、 AWS リソースについて広く知見を貯められたかなと思います。

### 反省点

デプロイについては、方針が固まる前に管轄が自分の手から離れてしまったことで、実際にされた運用的には、ローカル端末でのオペレーションやデプロイ作業がされるようになってしまっていました。これらは Git の操作ミスなどに起因するデプロイミスを誘発し、また、一部の特殊なデプロイに関しては、故障対応後の再デプロイの際に時間がかかったりデプロイミスが起こっていました。また、デプロイ知識や手法が属人化してしまうことで、担当者の離任後に引き継ぎ者によるデプロイがうまくいかず、トラブルシューティングに時間がかかってしまうなど、アンチパターンを実践する結果となっていました。

### 反省点に対しての if 案

こちらについては、何らかの手段で「デプロイのコード化(IaC)と共有」ができていれば、再現性のあるデプロイを実行できて上記のような失敗を防げたと考えています。今回の場合、ローカルや開発環境からステージ環境のリソースを自由に扱える IAM ユーザーとロールが払い出されていたので、例えば、開発環境上に CodePipeline を構築し、テスト環境の IAM ユーザーとロールのクレデンシャルで CodeBuild を動かしてデプロイしたり、開発環境にライブラリ管理用の共有 EC2 を立てて、そこにデプロイ用リソースを集約するなど、何かしら手は打てたのかなと、振り返っています。
